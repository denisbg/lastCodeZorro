{
    "sourceFile": "src/components/front/mArtListePrestation.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1706878304433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1706878468435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import React, { useState, useEffect, useRef } from \"react\";\r\n import Select from \"../ui-elements/select\";\r\n import PrestationFiche from \"./prestationFiche\";\r\n-import { ListFichePrestation } from \"../../assets/styles/frontGlobalStyle\";\r\n+import { ListFichePrestation, MartListFichePrestation } from \"../../assets/styles/frontGlobalStyle\";\r\n import { Col, Row } from \"react-bootstrap\";\r\n import GoogleMap from \"google-map-react\";\r\n import PrestationFicheMap from \"./prestationFicheMap\";\r\n import { K_SIZE } from \"./markerStyle\";\r\n@@ -153,9 +153,9 @@\n       },\r\n     ],\r\n   };\r\n   return (\r\n-    <ListFichePrestation>\r\n+    <MartListFichePrestation>\r\n       <div className=\"head-list-content\">\r\n         <h1 className=\"title-bloc-products\">\r\n           {service ? getTitleService() : \"\"}\r\n         </h1>\r\n"
                },
                {
                    "date": 1706878479202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -153,9 +153,9 @@\n       },\r\n     ],\r\n   };\r\n   return (\r\n-    <MartListFichePrestation>\r\n+    <MArtListFichePrestation>\r\n       <div className=\"head-list-content\">\r\n         <h1 className=\"title-bloc-products\">\r\n           {service ? getTitleService() : \"\"}\r\n         </h1>\r\n"
                },
                {
                    "date": 1706878580635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -153,9 +153,9 @@\n       },\r\n     ],\r\n   };\r\n   return (\r\n-    <MArtListFichePrestation>\r\n+    <ListFichePrestation>\r\n       <div className=\"head-list-content\">\r\n         <h1 className=\"title-bloc-products\">\r\n           {service ? getTitleService() : \"\"}\r\n         </h1>\r\n"
                },
                {
                    "date": 1706878778360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -153,9 +153,9 @@\n       },\r\n     ],\r\n   };\r\n   return (\r\n-    <ListFichePrestation>\r\n+    <MArtFichePrestation>\r\n       <div className=\"head-list-content\">\r\n         <h1 className=\"title-bloc-products\">\r\n           {service ? getTitleService() : \"\"}\r\n         </h1>\r\n@@ -194,7 +194,7 @@\n             {places}\r\n           </GoogleMap>\r\n         </Col>\r\n       </Row>\r\n-    </ListFichePrestation>\r\n+    </MArtFichePrestation>\r\n   );\r\n }\r\n"
                },
                {
                    "date": 1706878885028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import PrestationFiche from \"./prestationFiche\";\r\n import { ListFichePrestation, MartListFichePrestation } from \"../../assets/styles/frontGlobalStyle\";\r\n import { Col, Row } from \"react-bootstrap\";\r\n import GoogleMap from \"google-map-react\";\r\n-import PrestationFicheMap from \"./prestationFicheMap\";\r\n+import MArtPrestationFicheMap from \"./mArtprestationFicheMap.js\";\r\n import { K_SIZE } from \"./markerStyle\";\r\n import * as vars from \"../../vars\";\r\n import { useMediaQuery } from \"react-responsive\";\r\n import Slider from \"react-slick\";\r\n"
                },
                {
                    "date": 1706878961792,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import PrestationFiche from \"./prestationFiche\";\r\n import { ListFichePrestation, MartListFichePrestation } from \"../../assets/styles/frontGlobalStyle\";\r\n import { Col, Row } from \"react-bootstrap\";\r\n import GoogleMap from \"google-map-react\";\r\n+import MArtFichePrestation from \"./mFichePrestation.js\";\r\n import MArtPrestationFicheMap from \"./mArtprestationFicheMap.js\";\r\n import { K_SIZE } from \"./markerStyle\";\r\n import * as vars from \"../../vars\";\r\n import { useMediaQuery } from \"react-responsive\";\r\n"
                },
                {
                    "date": 1706878998691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import PrestationFiche from \"./prestationFiche\";\r\n import { ListFichePrestation, MartListFichePrestation } from \"../../assets/styles/frontGlobalStyle\";\r\n import { Col, Row } from \"react-bootstrap\";\r\n import GoogleMap from \"google-map-react\";\r\n-import MArtFichePrestation from \"./mFichePrestation.js\";\r\n+import MArtFichePrestation from \"./mArtprestationFicheMap.js\";\r\n import MArtPrestationFicheMap from \"./mArtprestationFicheMap.js\";\r\n import { K_SIZE } from \"./markerStyle\";\r\n import * as vars from \"../../vars\";\r\n import { useMediaQuery } from \"react-responsive\";\r\n"
                },
                {
                    "date": 1706879044280,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,9 +117,9 @@\n \r\n   const places = benefits.length\r\n     ? benefits.map((row) => {\r\n         return (\r\n-          <PrestationFicheMap\r\n+          <MArtPrestationFicheMap\r\n             key={row.id}\r\n             lat={row.user.latitude}\r\n             lng={row.user.longitude}\r\n             text={\r\n"
                },
                {
                    "date": 1706879364505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n import * as vars from \"../../vars\";\r\n import { useMediaQuery } from \"react-responsive\";\r\n import Slider from \"react-slick\";\r\n \r\n-export default function MArtListePrestation({\r\n+export default function MArtListePrestationFiche({\r\n   service = {},\r\n   benefits = [],\r\n   filter,\r\n   setFilter,\r\n"
                }
            ],
            "date": 1706878304433,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect, useRef } from \"react\";\r\nimport Select from \"../ui-elements/select\";\r\nimport PrestationFiche from \"./prestationFiche\";\r\nimport { ListFichePrestation } from \"../../assets/styles/frontGlobalStyle\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport GoogleMap from \"google-map-react\";\r\nimport PrestationFicheMap from \"./prestationFicheMap\";\r\nimport { K_SIZE } from \"./markerStyle\";\r\nimport * as vars from \"../../vars\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport Slider from \"react-slick\";\r\n\r\nexport default function MArtListePrestation({\r\n  service = {},\r\n  benefits = [],\r\n  filter,\r\n  setFilter,\r\n  greatPlaces,\r\n  isPending,\r\n  ...props\r\n}) {\r\n  let refSlider = useRef(null);\r\n  const isTabletOrMobile = useMediaQuery({ query: \"(max-width: 993px)\" });\r\n  const isDesktopOrLaptop = useMediaQuery({\r\n    query: \"(min-width: 994px)\",\r\n  });\r\n  const [state, setState] = useState({\r\n    map: { center: [48.8534, 2.3488], zoom: 10 },\r\n  });\r\n  const [activeBenefit, setActiveBenefit] = useState({ id: null });\r\n\r\n  useEffect(() => {\r\n    if (filter.codePostal.latitude && filter.codePostal.longitude) {\r\n      const cpState = { ...state };\r\n      cpState.map.center = [\r\n        filter.codePostal.latitude,\r\n        filter.codePostal.longitude,\r\n      ];\r\n      setState(cpState);\r\n    }\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [filter.codePostal.latitude, filter.codePostal.longitude]);\r\n\r\n  useEffect(() => {\r\n    if (activeBenefit?.user?.latitude && activeBenefit?.user?.longitude) {\r\n      const cpState = { ...state };\r\n      cpState.map.center = [\r\n        activeBenefit.user.latitude,\r\n        activeBenefit.user.longitude,\r\n      ];\r\n      setState(cpState);\r\n    }\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activeBenefit]);\r\n\r\n  const rowRender = (row) => (\r\n    <PrestationFiche\r\n      activeBenefit={activeBenefit}\r\n      setActiveBenefit={setActiveBenefit}\r\n      key={row.id}\r\n      row={row}\r\n    />\r\n  );\r\n\r\n  const showData = () => {\r\n    if (service === false || isPending)\r\n      return (\r\n        <div className=\"loading-table\" style={{ textAlign: \"center\" }}>\r\n          Chargement...\r\n        </div>\r\n      );\r\n    else if (benefits.length === 0)\r\n      return (\r\n        <h3\r\n          style={{\r\n            textAlign: \"center\",\r\n            width: \"100%\",\r\n            fontSize: \"22px\",\r\n            fontWeight: \"600\",\r\n          }}\r\n        >\r\n          Aucune donnée\r\n        </h3>\r\n      );\r\n\r\n    return benefits.map((row) => {\r\n      return rowRender(row);\r\n    });\r\n  };\r\n\r\n  const _onChildClick = (key, childProps) => {\r\n    let i = null;\r\n    const benefit = benefits.length\r\n      ? benefits.find((val, index) => {\r\n          if (val.id === childProps.id) {\r\n            i = index;\r\n            return true;\r\n          }\r\n        })\r\n      : { id: null };\r\n    if (benefit.id) {\r\n      setActiveBenefit(benefit);\r\n      if (isTabletOrMobile) {\r\n        refSlider.slickGoTo(i);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getTitleService = () => {\r\n    return `${service.name} : ${benefits.length} réparateur${\r\n      benefits.length > 1 ? \"(s)\" : \"\"\r\n    }`;\r\n  };\r\n\r\n  const places = benefits.length\r\n    ? benefits.map((row) => {\r\n        return (\r\n          <PrestationFicheMap\r\n            key={row.id}\r\n            lat={row.user.latitude}\r\n            lng={row.user.longitude}\r\n            text={\r\n              row.typeService === \"forfait\" ? `${row.minPrice} €` : \"Sur devis\"\r\n            }\r\n            id={row.id}\r\n            // use your hover state (from store, react-controllables etc...)\r\n            activeBenefit={activeBenefit}\r\n          />\r\n        );\r\n      })\r\n    : \"\";\r\n\r\n  const settings = {\r\n    className: \"slider variable-width\",\r\n    infinite: false,\r\n    centerMode: true,\r\n    slidesToShow: 2,\r\n    slidesToScroll: 1,\r\n    variableWidth: true,\r\n    arrows: false,\r\n    focusOnSelect: true,\r\n    initialSlide: 1,\r\n    responsive: [\r\n      {\r\n        breakpoint: 575,\r\n        settings: {\r\n          slidesToShow: 1,\r\n          slidesToScroll: 1,\r\n          initialSlide: 0,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n  return (\r\n    <ListFichePrestation>\r\n      <div className=\"head-list-content\">\r\n        <h1 className=\"title-bloc-products\">\r\n          {service ? getTitleService() : \"\"}\r\n        </h1>\r\n        <Select\r\n          {...filter.sortBy}\r\n          onChange={(e) => {\r\n            const cpFilter = { ...filter };\r\n            cpFilter.codePostal.error = false;\r\n            cpFilter.sortBy.value = e.value;\r\n            setFilter(cpFilter);\r\n          }}\r\n        />\r\n      </div>\r\n      <Row className=\"bloc-lists-prstation-items\">\r\n        <Col lg={5} className=\"content-lists-prstation-items\">\r\n          {isDesktopOrLaptop && (\r\n            <div className=\"lists-prstation-items\">{showData()}</div>\r\n          )}\r\n          {isTabletOrMobile && (\r\n            <Slider ref={(slider) => (refSlider = slider)} {...settings}>\r\n              {showData()}\r\n            </Slider>\r\n          )}\r\n        </Col>\r\n        <Col lg={7} className=\"bloc-map-list\">\r\n          <GoogleMap\r\n            apiKey={vars.mapsApiKey}\r\n            center={state.map.center}\r\n            zoom={state.map.zoom}\r\n            hoverDistance={K_SIZE / 2}\r\n            onChildClick={_onChildClick}\r\n            onGoogleApiLoaded={({ map, maps }) => {\r\n              //console.log(\"map is loaded.\");\r\n            }}\r\n          >\r\n            {places}\r\n          </GoogleMap>\r\n        </Col>\r\n      </Row>\r\n    </ListFichePrestation>\r\n  );\r\n}\r\n"
        }
    ]
}