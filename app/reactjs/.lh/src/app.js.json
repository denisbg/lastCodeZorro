{
    "sourceFile": "src/app.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 32,
            "patches": [
                {
                    "date": 1712662631429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1712663619912,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,10 @@\n import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n function App() {\r\n-  console.log = function(){};\r\n+  //console.log = function(){};\r\n+\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1712665323366,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,14 +17,17 @@\n import {\r\n   REFRESH_TOKEN,\r\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n-import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID } from \"./vars\";\r\n+import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consolelogActivated } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n function App() {\r\n   //console.log = function(){};\r\n \r\n+  console.log(\"UNI STEP 01 consolelogActivated\",consolelogActivated);\r\n+  var console = {};\r\n+  console.log = function(){};\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1712665344526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,15 +17,15 @@\n import {\r\n   REFRESH_TOKEN,\r\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n-import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consolelogActivated } from \"./vars\";\r\n+import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n function App() {\r\n   //console.log = function(){};\r\n \r\n-  console.log(\"UNI STEP 01 consolelogActivated\",consolelogActivated);\r\n+  console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n   var console = {};\r\n   console.log = function(){};\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n"
                },
                {
                    "date": 1712665419257,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,13 +21,15 @@\n import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n function App() {\r\n-  //console.log = function(){};\r\n+  \r\n \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n+  /*\r\n   var console = {};\r\n   console.log = function(){};\r\n+  */\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1717753375772,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,12 +20,28 @@\n } from \"./store/functions/actionTypes\";\r\n import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n+ \r\n+import { useLocation } from \"react-router-dom\";\r\n+\r\n+// hook to check the app version on route change\r\n+function useVersionCheck() {\r\n+  // check if a version update (refresh) needed on route change\r\n+  let location = useLocation();\r\n+  React.useLayoutEffect(() => {\r\n+    // if there is an update available and no state passed to route\r\n+    if (!location.state && window.localStorage.getItem('version-update-needed')) {\r\n+      window.localStorage.removeItem('version-update-needed'); // remove the storage object\r\n+      window.location.reload(); // refresh the browser\r\n+    }\r\n+  }, [location]);\r\n+};\r\n function App() {\r\n   \r\n \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n+  useVersionCheck();\r\n   /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n"
                },
                {
                    "date": 1717753433719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n  \r\n-import { useLocation } from \"react-router-dom\";\r\n+import { useLocation , useContext} from \"react-router-dom\";\r\n \r\n // hook to check the app version on route change\r\n function useVersionCheck() {\r\n   // check if a version update (refresh) needed on route change\r\n"
                },
                {
                    "date": 1717753673628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,11 @@\n function App() {\r\n   \r\n \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n-  useVersionCheck();\r\n+  let csv = window.localStorage.getItem('client_side_version');\r\n+  console.log(\"UNI STEP 02 clientsideversion\",csv);\r\n+\r\n   /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n"
                },
                {
                    "date": 1717753708919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,22 +21,11 @@\n import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n  \r\n-import { useLocation , useContext} from \"react-router-dom\";\r\n+import { useLocation   } from \"react-router-dom\";\r\n \r\n-// hook to check the app version on route change\r\n-function useVersionCheck() {\r\n-  // check if a version update (refresh) needed on route change\r\n-  let location = useLocation();\r\n-  React.useLayoutEffect(() => {\r\n-    // if there is an update available and no state passed to route\r\n-    if (!location.state && window.localStorage.getItem('version-update-needed')) {\r\n-      window.localStorage.removeItem('version-update-needed'); // remove the storage object\r\n-      window.location.reload(); // refresh the browser\r\n-    }\r\n-  }, [location]);\r\n-};\r\n+ \r\n function App() {\r\n   \r\n \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n"
                },
                {
                    "date": 1717753785211,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,8 +30,9 @@\n \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n   let csv = window.localStorage.getItem('client_side_version');\r\n   console.log(\"UNI STEP 02 clientsideversion\",csv);\r\n+  window.localStorage.setItem('client_side_version',\"1.0111\");\r\n \r\n   /*\r\n   var console = {};\r\n   console.log = function(){};\r\n"
                },
                {
                    "date": 1717754722146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,23 +17,23 @@\n import {\r\n   REFRESH_TOKEN,\r\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n-import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated } from \"./vars\";\r\n+import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, versionApp } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n \r\n  \r\n import { useLocation   } from \"react-router-dom\";\r\n \r\n  \r\n function App() {\r\n   \r\n-\r\n+  \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n-  let csv = window.localStorage.getItem('client_side_version');\r\n+  let csv = versionApp;\r\n   console.log(\"UNI STEP 02 clientsideversion\",csv);\r\n-  window.localStorage.setItem('client_side_version',\"1.0111\");\r\n-\r\n+  //('version-update-needed'); // remove the storage object\r\n+  //window.location.reload();\r\n   /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n"
                },
                {
                    "date": 1717755227789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -29,9 +29,9 @@\n   \r\n   \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n   let csv = versionApp;\r\n-  console.log(\"UNI STEP 02 clientsideversion\",csv);\r\n+  console.log(\"UNI STEP 02 clientsideversion\",process.env.VERSION_APP);\r\n   //('version-update-needed'); // remove the storage object\r\n   //window.location.reload();\r\n   /*\r\n   var console = {};\r\n"
                },
                {
                    "date": 1717755333804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,11 +30,9 @@\n   \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n   let csv = versionApp;\r\n   console.log(\"UNI STEP 02 clientsideversion\",process.env.VERSION_APP);\r\n-  //('version-update-needed'); // remove the storage object\r\n-  //window.location.reload();\r\n-  /*\r\n+ \r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   const dispatch = useDispatch();\r\n@@ -101,8 +99,9 @@\n   };\r\n \r\n   useEffect(() => {\r\n     const token = localStorage.getItem(\"token\");\r\n+    const token = localStorage.getItem(\"version_app\");\r\n     const refresh_token = localStorage.getItem(\"refresh_token\");\r\n     if (token === undefined || refresh_token === undefined) {\r\n       setIsDone(true);\r\n       return;\r\n"
                },
                {
                    "date": 1717755419570,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n   \r\n   console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n   let csv = versionApp;\r\n   console.log(\"UNI STEP 02 clientsideversion\",process.env.VERSION_APP);\r\n- \r\n+ /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   const dispatch = useDispatch();\r\n@@ -99,9 +99,9 @@\n   };\r\n \r\n   useEffect(() => {\r\n     const token = localStorage.getItem(\"token\");\r\n-    const token = localStorage.getItem(\"version_app\");\r\n+    const versionApp = localStorage.getItem(\"version_app\");\r\n     const refresh_token = localStorage.getItem(\"refresh_token\");\r\n     if (token === undefined || refresh_token === undefined) {\r\n       setIsDone(true);\r\n       return;\r\n"
                },
                {
                    "date": 1717755488893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,12 +27,10 @@\n  \r\n function App() {\r\n   \r\n   \r\n-  console.log(\"UNI STEP 01 consolelogActivated\",consoleActivated);\r\n-  let csv = versionApp;\r\n-  console.log(\"UNI STEP 02 clientsideversion\",process.env.VERSION_APP);\r\n- /*\r\n+  console.log(\"ConsolelogActivated\",consoleActivated);\r\n+  /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   const dispatch = useDispatch();\r\n@@ -100,8 +98,10 @@\n \r\n   useEffect(() => {\r\n     const token = localStorage.getItem(\"token\");\r\n     const versionApp = localStorage.getItem(\"version_app\");\r\n+    console.log(\"UNI STEP 02 clientsideversion\",versionApp);\r\n+ \r\n     const refresh_token = localStorage.getItem(\"refresh_token\");\r\n     if (token === undefined || refresh_token === undefined) {\r\n       setIsDone(true);\r\n       return;\r\n"
                },
                {
                    "date": 1717755513555,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n \r\n   useEffect(() => {\r\n     const token = localStorage.getItem(\"token\");\r\n     const versionApp = localStorage.getItem(\"version_app\");\r\n-    console.log(\"UNI STEP 02 clientsideversion\",versionApp);\r\n+    console.log(\"Locale storage versionApp:\",versionApp);\r\n  \r\n     const refresh_token = localStorage.getItem(\"refresh_token\");\r\n     if (token === undefined || refresh_token === undefined) {\r\n       setIsDone(true);\r\n"
                },
                {
                    "date": 1717757425201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,10 +97,12 @@\n   };\r\n \r\n   useEffect(() => {\r\n     const token = localStorage.getItem(\"token\");\r\n-    const versionApp = localStorage.getItem(\"version_app\");\r\n-    console.log(\"Locale storage versionApp:\",versionApp);\r\n+    const localVersionApp = localStorage.getItem(\"version_client\");\r\n+    const serverVersionApp = localStorage.getItem(\"version_server\");\r\n+    console.log(\"Local storage versionApp:\",localVersionApp);\r\n+    console.log(\"Server storage versionApp:\",localVersionApp);\r\n  \r\n     const refresh_token = localStorage.getItem(\"refresh_token\");\r\n     if (token === undefined || refresh_token === undefined) {\r\n       setIsDone(true);\r\n"
                },
                {
                    "date": 1717758216413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,11 +19,9 @@\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, versionApp } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n-\r\n  \r\n-import { useLocation   } from \"react-router-dom\";\r\n \r\n  \r\n function App() {\r\n   \r\n@@ -97,13 +95,14 @@\n   };\r\n \r\n   useEffect(() => {\r\n     const token = localStorage.getItem(\"token\");\r\n+    /*\r\n     const localVersionApp = localStorage.getItem(\"version_client\");\r\n     const serverVersionApp = localStorage.getItem(\"version_server\");\r\n-    console.log(\"Local storage versionApp:\",localVersionApp);\r\n-    console.log(\"Server storage versionApp:\",localVersionApp);\r\n- \r\n+    console.log(\"Begin Local storage versionApp:\",localVersionApp);\r\n+    console.log(\"Begin Server storage versionApp:\",serverVersionApp);\r\n+ */\r\n     const refresh_token = localStorage.getItem(\"refresh_token\");\r\n     if (token === undefined || refresh_token === undefined) {\r\n       setIsDone(true);\r\n       return;\r\n"
                },
                {
                    "date": 1717762872059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,21 +17,23 @@\n import {\r\n   REFRESH_TOKEN,\r\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n-import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, versionApp } from \"./vars\";\r\n+import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, version_app } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n  \r\n \r\n  \r\n function App() {\r\n   \r\n   \r\n-  console.log(\"ConsolelogActivated\",consoleActivated);\r\n+  \r\n   /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n+  console.log(\"ConsolelogActivated\",consoleActivated);\r\n+  console.log(\"version_app\",version_app);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1717763418250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n-  console.log(\"version_app\",version_app);\r\n+  console.log(\"version_app\", process.env.VERSION_APP);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1717763464214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n import {\r\n   REFRESH_TOKEN,\r\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n-import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, version_app } from \"./vars\";\r\n+import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, VERSION_APP } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n  \r\n \r\n  \r\n"
                },
                {
                    "date": 1717763489420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n-  console.log(\"version_app\", process.env.VERSION_APP);\r\n+  console.log(\"version_app\", VERSION_APP);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1717764042281,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n import {\r\n   REFRESH_TOKEN,\r\n   REFRESH_TOKEN_FAIL,\r\n } from \"./store/functions/actionTypes\";\r\n-import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, VERSION_APP } from \"./vars\";\r\n+import { GOOGLE_ANALYTICS_ID, FACEBOOK_ID ,consoleActivated, versionApp } from \"./vars\";\r\n import ReactPixel from \"react-facebook-pixel\";\r\n  \r\n \r\n  \r\n"
                },
                {
                    "date": 1717764105668,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n-  console.log(\"version_app\", VERSION_APP);\r\n+  console.log(\"version_app\", versionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1717764193726,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,8 +31,10 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n+  console.log(\"GOOGLE_ANALYTICS_ID\",GOOGLE_ANALYTICS_ID);\r\n+  \r\n   console.log(\"version_app\", versionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n"
                },
                {
                    "date": 1717764208133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n-  console.log(\"GOOGLE_ANALYTICS_ID\",GOOGLE_ANALYTICS_ID);\r\n+  console.log(\"GOOGLE_ANALYTICS_ID\",FACEBOOK_ID);\r\n   \r\n   console.log(\"version_app\", versionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n"
                },
                {
                    "date": 1717764236428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,8 @@\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n   console.log(\"GOOGLE_ANALYTICS_ID\",FACEBOOK_ID);\r\n-  \r\n   console.log(\"version_app\", versionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n"
                },
                {
                    "date": 1717764846501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n-  console.log(\"GOOGLE_ANALYTICS_ID\",FACEBOOK_ID);\r\n+  console.log(\" \",FACEBOOK_ID);\r\n   console.log(\"version_app\", versionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n"
                },
                {
                    "date": 1717765511570,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,8 +33,10 @@\n   */\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n   console.log(\" \",FACEBOOK_ID);\r\n   console.log(\"version_app\", versionApp);\r\n+  const localStorageVersionApp = localStorage.getItem(\"version_app\");\r\n+  console.log(\"localStorageVersionApp\", localStorageVersionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n \r\n"
                },
                {
                    "date": 1717765600831,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,12 +30,14 @@\n   /*\r\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n+  const localStorageVersionApp = localStorage.getItem(\"version_app\");\r\n+  localStorage.setItem(\"version_app\",\"BOOTSTREP\");\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n   console.log(\" \",FACEBOOK_ID);\r\n   console.log(\"version_app\", versionApp);\r\n-  const localStorageVersionApp = localStorage.getItem(\"version_app\");\r\n+\r\n   console.log(\"localStorageVersionApp\", localStorageVersionApp);\r\n   const dispatch = useDispatch();\r\n   const auth = useSelector((state) => state.auth);\r\n   const [isDone, setIsDone] = useState(false);\r\n"
                },
                {
                    "date": 1717765709235,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,8 +32,10 @@\n   console.log = function(){};\r\n   */\r\n   const localStorageVersionApp = localStorage.getItem(\"version_app\");\r\n   localStorage.setItem(\"version_app\",\"BOOTSTREP\");\r\n+  if (versionApp != localStorageVersionApp)\r\n+     alert(\"DIFFENRECCE\");\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n   console.log(\" \",FACEBOOK_ID);\r\n   console.log(\"version_app\", versionApp);\r\n \r\n"
                },
                {
                    "date": 1717766037960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,11 +31,18 @@\n   var console = {};\r\n   console.log = function(){};\r\n   */\r\n   const localStorageVersionApp = localStorage.getItem(\"version_app\");\r\n-  localStorage.setItem(\"version_app\",\"BOOTSTREP\");\r\n+ \r\n   if (versionApp != localStorageVersionApp)\r\n-     alert(\"DIFFENRECCE\");\r\n+  {\r\n+    alert(\"Une nouvelle version de l'application est disponible\");\r\n+    localStorage.setItem(\"version_app\",versionApp);\r\n+    window.location.reload();\r\n+  }  \r\n+    \r\n+ \r\n+\r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n   console.log(\" \",FACEBOOK_ID);\r\n   console.log(\"version_app\", versionApp);\r\n \r\n"
                },
                {
                    "date": 1717766840105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n     \r\n  \r\n \r\n   console.log(\"ConsolelogActivated\",consoleActivated);\r\n-  console.log(\" \",FACEBOOK_ID);\r\n+ \r\n   console.log(\"version_app\", versionApp);\r\n \r\n   console.log(\"localStorageVersionApp\", localStorageVersionApp);\r\n   const dispatch = useDispatch();\r\n"
                }
            ],
            "date": 1712662631429,
            "name": "Commit-0",
            "content": "import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport CookieConsent, { Cookies } from \"react-cookie-consent\";\r\nimport { NotificationContainer } from \"react-notifications\";\r\nimport \"react-notifications/lib/notifications.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"./app.css\";\r\nimport \"./assets/styles/componentStyles\";\r\nimport { CookiesBlocs } from \"./assets/styles/frontGlobalStyle\";\r\nimport endPoints from \"./config/endPoints\";\r\nimport ROUTES from \"./config/routes\";\r\nimport connector from \"./connector\";\r\nimport Router from \"./router\";\r\nimport {\r\n  REFRESH_TOKEN,\r\n  REFRESH_TOKEN_FAIL,\r\n} from \"./store/functions/actionTypes\";\r\nimport { GOOGLE_ANALYTICS_ID, FACEBOOK_ID } from \"./vars\";\r\nimport ReactPixel from \"react-facebook-pixel\";\r\n\r\nfunction App() {\r\n  console.log = function(){};\r\n  const dispatch = useDispatch();\r\n  const auth = useSelector((state) => state.auth);\r\n  const [isDone, setIsDone] = useState(false);\r\n\r\n  // facebook pixel\r\n  const advancedMatching = {};\r\n  const options = {\r\n    autoConfig: true,\r\n    debug: true,\r\n  };\r\n  ReactPixel.init(FACEBOOK_ID, advancedMatching, options);\r\n  ReactPixel.pageView();\r\n  ReactPixel.revokeConsent();\r\n\r\n  useEffect(() => {\r\n    if (Cookies.get(\"useCookiesAccepted\")) {\r\n      // google analytics\r\n      const script = document.createElement(\"script\");\r\n      script.src =\r\n        \"https://www.googletagmanager.com/gtag/js?id=\" + GOOGLE_ANALYTICS_ID;\r\n      script.async = true;\r\n\r\n      script.addEventListener(\"load\", function () {\r\n        window.dataLayer = window.dataLayer || [];\r\n        function gtag() {\r\n          window.dataLayer.push(arguments);\r\n        }\r\n        gtag(\"js\", new Date());\r\n        gtag(\"config\", GOOGLE_ANALYTICS_ID);\r\n      });\r\n\r\n      document.body.appendChild(script);\r\n\r\n      // facebook pixel\r\n      ReactPixel.grantConsent();\r\n    }\r\n  }, [Cookies.get(\"useCookiesAccepted\")]);\r\n\r\n  useEffect(() => {\r\n    // Last seen of this user\r\n    lastseen(auth.user);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [auth.user]);\r\n\r\n  const lastseen = (user) => {\r\n    if (user) {\r\n      connector({\r\n        url: `${endPoints.USER}/${user.id}/lastseen`,\r\n        method: \"put\",\r\n        success: (response) => {\r\n          setTimeout(\r\n            () => (localStorage.getItem(\"token\") ? lastseen(auth.user) : false),\r\n            30000\r\n          );\r\n          //console.log(response);\r\n        },\r\n        catch: (err) => {\r\n          console.log(err);\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const refresh_token = localStorage.getItem(\"refresh_token\");\r\n    if (token === undefined || refresh_token === undefined) {\r\n      setIsDone(true);\r\n      return;\r\n    }\r\n    let dateExp =\r\n      token !== null ? new Date(jwtDecode(token).exp * 1000) : false;\r\n    if (dateExp !== false && dateExp > Date.now()) {\r\n      dispatch({\r\n        type: REFRESH_TOKEN,\r\n        token: token,\r\n      });\r\n      setIsDone(true);\r\n    } else if (refresh_token !== null)\r\n      connector({\r\n        method: \"post\",\r\n        url: endPoints.REFRESH_TOKEN,\r\n        data: {\r\n          refresh_token: refresh_token,\r\n        },\r\n        success: (response) => {\r\n          dispatch({\r\n            type: REFRESH_TOKEN,\r\n            token: response.data.token,\r\n          });\r\n          setIsDone(true);\r\n        },\r\n        catch: (error) => {\r\n          dispatch({\r\n            type: REFRESH_TOKEN_FAIL,\r\n          });\r\n          setIsDone(true);\r\n        },\r\n      });\r\n    else setIsDone(true);\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <CookiesBlocs>\r\n      <CookieConsent\r\n        location=\"bottom\"\r\n        cookieName=\"useCookiesAccepted\"\r\n        buttonText=\"J'accepte\"\r\n        declineButtonText=\"Je refuse\"\r\n        enableDeclineButton\r\n        flipButtons\r\n        contentClasses=\"content-cookies\"\r\n      >\r\n        Ce site Web utilise\r\n        <a\r\n          href={ROUTES.CHARTE_COOKIES.url}\r\n          target=\"_blank\"\r\n          style={{ color: \"#4D5F68\", margin: \"5px\", fontWeight: \"600\" }}\r\n        >\r\n          des cookies\r\n        </a>\r\n        pour améliorer l'expérience utilisateur.\r\n      </CookieConsent>\r\n      {isDone ? <Router /> : \"Chargement ...\"}\r\n      <NotificationContainer />\r\n    </CookiesBlocs>\r\n  );\r\n}\r\nexport default App;\r\n"
        }
    ]
}